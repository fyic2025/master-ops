---
category:
    shop_by_price: true
    products:
        limit: {{theme_settings.categorypage_products_per_page}}
---
{{inject "categoryProductsPerPage" theme_settings.categorypage_products_per_page}}
{{inject "categoryId" category.id}}
{{#partial "head"}}
    {{#if pagination.category.previous}}
        <link rel="prev" href="{{pagination.category.previous}}">
    {{/if}}
    {{#if pagination.category.next}}
        <link rel="next" href="{{pagination.category.next}}">
    {{/if}}
{{/partial}}

{{#partial "page"}}

{{> components/common/breadcrumbs breadcrumbs=breadcrumbs}}
<div class="BreadName" style="display:none;">{{breadcrumbs.[1].name}} {{customer.customer_group_name}}</div>
{{#if category.image}}
    {{> components/common/responsive-img
        image=category.image
        fallback_size=theme_settings.zoom_size
        lazyload=theme_settings.lazyload_mode
        class="category-header-image"
    }}
{{/if}}
{{#unless theme_settings.hide_category_page_heading }}
    <h1 class="page-heading">{{category.name}}</h1>
    {{{region name="category_below_header"}}}
{{/unless}}
{{#if category.description}}
<div class="category-desc">
    <div class="category-Shortdesc">
    	<div class="FixedHieghtDescription">
        	{{{category.description}}}
        </div>
        <div class="ReadMoreBtn">Read More</div>
    </div>
    
    <div class="category-Fulldesc" style="display:none;">
        {{{category.description}}}
        <div class="ReadLessBtn">Read Less</div>
    </div>
</div>
{{/if}}
<div class="page category-page">
    {{#if category.faceted_search_enabled}}
        <aside class="page-sidebar" id="faceted-search-container">
            {{> components/category/sidebar}}
        </aside>
    {{else if category.subcategories}}
        <aside class="page-sidebar" id="faceted-search-container">
            {{> components/category/sidebar}}
        </aside>
    {{else if category.shop_by_price}}
        {{#if theme_settings.shop_by_price_visibility}}
             <aside class="page-sidebar" id="faceted-search-container">
                {{> components/category/sidebar}}
            </aside>
        {{/if}}
    {{/if}}

    <main class="page-content {{#if breadcrumbs.[1].name '==' 'Cold Storage'}}{{#unless customer.customer_group_name '==' 'Fruit & Veg'}}HideButtons{{/unless}}{{/if}}" id="product-listing-container">
        {{> components/category/product-listing}}
        {{{region name="category_below_content"}}}
    </main>
    
</div>
{{#if breadcrumbs.[1].name '==' 'Cold Storage'}}
{{#unless customer.customer_group_name '==' 'Fruit & Veg'}}
<style>
.HideButtons .offstock_b.SpecialButton {
    display: block !important;
    background: #ff4333;
    color: #fff;
    text-align: center;
    border-radius: 2px;
    opacity: .85;
    padding: 8px 0;
    margin: 6px 0 0 0;
    letter-spacing: .05rem;
}   
</style>
{{/unless}}
{{/if}}
<script>
$(document).ready(function(e) {
    $('.ReadMoreBtn').click(function(e) {
        $('.category-desc .category-Shortdesc').hide();
		$('.category-desc .category-Fulldesc').show();
    });
	$('.ReadLessBtn').click(function(e) {
        $('.category-desc .category-Shortdesc').show();
		$('.category-desc .category-Fulldesc').hide();
    });
});
</script>
{{!--
<script src="https://cdnjs.cloudflare.com/ajax/libs/Readmore.js/2.0.2/readmore.min.js" integrity="sha512-llWtDR3k09pa9nOBfutQnrS2kIEG7M6Zm7RIjVVLNab1wRs8NUmA0OjAE38jKzKeCg+A3rdq8AVW41ZTsfhu5Q==" crossorigin="anonymous"></script>
<script>
$('.category-desc').readmore({
	speed: 200,
	collapsedHeight: 250,
	lessLink: '<div class="catbtn"><a href="#" class="readless">Read less</a></div>',
	moreLink: '<div class="catbtn"><a href="#" class="readmore">Read more</a></div>'
});
</script>
--}}
{{/partial}}
{{> layout/base}}
